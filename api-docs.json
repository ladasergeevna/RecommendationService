{"openapi":"3.0.1","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"tags":[{"name":"Management Info","description":"Контроллер для получения информации о проекте"},{"name":"RecommendationRuleController","description":"Контроллер для управления (создания, удаления) правилами"},{"name":"Cache Management","description":"Контроллер для управления кэшированием и его очистки"},{"name":"UserController","description":"Контроллер для работы с пользователями"},{"name":"RecommendationController","description":"Контроллер для получения рекомендаций пользователем"},{"name":"RuleStatsController","description":"Контроллер для получения статистики срабатывания правил"}],"paths":{"/recommendation":{"post":{"tags":["RecommendationRuleController"],"summary":"Создание нового правила","operationId":"saveRecs","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecommendationRuleDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RecommendationsByRules"}}}}}}},"/management/clear-caches":{"post":{"tags":["Cache Management"],"summary":"Очистка кэша","description":"Очищает все кэши, управляемые CacheManager.","operationId":"clearAllCaches","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/users/withdraws/{id}":{"get":{"tags":["UserController"],"summary":"Получает информацию о выводе средств пользователя по его идентификатору","operationId":"getWithdrawOfUser","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserWithdraw"}}}}}}},"/users/deposits/{id}":{"get":{"tags":["UserController"],"summary":"Получает информацию о получении средств пользователя по его идентификатору","operationId":"getDepositOfUser","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDeposit"}}}}}}},"/rule/stats":{"get":{"tags":["RuleStatsController"],"summary":"Получает информацию о количестве срабатываний каждого правила","operationId":"getAllStats","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/recommendation/user/{userId}":{"get":{"tags":["RecommendationRuleController"],"summary":"Получает правила для пользователя по его идентификатору","operationId":"getRecForUser","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RecommendationsByRules"}}}}}}}},"/recommendation/clear-all":{"get":{"tags":["RecommendationRuleController"],"summary":"Удаляет все правила","operationId":"deleteAll","responses":{"200":{"description":"OK"}}}},"/management/info":{"get":{"tags":["Management Info"],"summary":"Получает название и версию приложения","operationId":"getInfo","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}}}}},"/api/recommendations/{userId}":{"get":{"tags":["RecommendationController"],"summary":"Получает рекомендации для пользователя по его ID","operationId":"getRecommendations","parameters":[{"name":"userId","in":"path","description":"ID пользователя","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RecommendationResponse"}}}}}}},"/api/recommendations/withdraw/{userId}":{"get":{"tags":["RecommendationController"],"summary":"Получает информацию о снятиях пользователя по его ID","operationId":"getWithById","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/WithdrawTransaction"}}}}}}},"/api/recommendations/deposit/{userId}":{"get":{"tags":["RecommendationController"],"summary":"Получает информацию о депозитах пользователя по его ID","operationId":"getDepById","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DepositTransactions"}}}}}}},"/recommendation/{productId}":{"delete":{"tags":["RecommendationRuleController"],"summary":"Удаляет продукт по его идентификатору","operationId":"deleteRecommendationByRule","parameters":[{"name":"productId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK"}}}}},"components":{"schemas":{"RecommendationRuleDto":{"type":"object","properties":{"rule":{"type":"array","items":{"$ref":"#/components/schemas/RuleDto"}},"productName":{"type":"string"},"productText":{"type":"string"}}},"RuleDto":{"type":"object","properties":{"query":{"type":"string"},"arguments":{"type":"array","items":{"type":"string"}},"negate":{"type":"boolean"}}},"RecommendationsByRules":{"type":"object","properties":{"productId":{"type":"string","format":"uuid"},"productName":{"type":"string"},"productText":{"type":"string"},"rule":{"type":"array","items":{"$ref":"#/components/schemas/Rule"}}}},"Rule":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"query":{"type":"string"},"arguments":{"type":"array","items":{"type":"string"}},"negate":{"type":"boolean"},"recommendation":{"$ref":"#/components/schemas/RecommendationsByRules"}}},"UserWithdraw":{"type":"object","properties":{"userId":{"type":"string","format":"uuid"},"debitWithdraw":{"type":"integer","format":"int32"},"creditWithdraw":{"type":"integer","format":"int32"},"investWithdraw":{"type":"integer","format":"int32"},"saveWithdraw":{"type":"integer","format":"int32"}}},"UserDeposit":{"type":"object","properties":{"userId":{"type":"string","format":"uuid"},"debitDeposit":{"type":"integer","format":"int32"},"creditDeposit":{"type":"integer","format":"int32"},"investDeposit":{"type":"integer","format":"int32"},"saveDeposit":{"type":"integer","format":"int32"}}},"RecommendationDto":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"text":{"type":"string"}}},"RecommendationResponse":{"type":"object","properties":{"userId":{"type":"string","format":"uuid"},"recommendations":{"type":"array","items":{"$ref":"#/components/schemas/RecommendationDto"}}}},"WithdrawTransaction":{"type":"object","properties":{"debitAmount":{"type":"integer","format":"int32"},"savingAmount":{"type":"integer","format":"int32"},"creditAmount":{"type":"integer","format":"int32"},"investAmount":{"type":"integer","format":"int32"}}},"DepositTransactions":{"type":"object","properties":{"debitAmount":{"type":"integer","format":"int32"},"savingAmount":{"type":"integer","format":"int32"},"creditAmount":{"type":"integer","format":"int32"},"investAmount":{"type":"integer","format":"int32"}}}}}}